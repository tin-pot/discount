<!doctype html public	"ISO/IEC 15445:2000//DTD HTML//EN">
<html>
<head>
  <meta name="GENERATOR" content="mkd2html 2.1.7/Win32 TAB=8 DL=BOTH ID-ANCHOR GITHUB-TAGS FENCED-CODE">
  <meta http-equiv="Content-Type"
        content="text/html; charset=ISO-8859-1">
  <link rel="stylesheet"
        type="text/css"
        href="MSVC/posc/default.css">
  <title>CHANGES file for &lsquo;tin-pot/discount&rsquo;</title>
</head>
<body>
<h1>Changes in this distribution of <code>discount</code></h1>

<h2>1  Overview</h2>

<p>For the most part, the &ldquo;<a href="https://github.com/tin-pot/discount/"><em>tin-pot/discount</em></a>&rdquo; sources are
identical to those in David Parsons' &ldquo;<a href="https://github.com/Orc/discount/"><em>orc/discount</em></a>&rdquo;
repository (after merging his repository into &ldquo;<em>tin-pot/discount</em>&rdquo; from
time to time).</p>

<p>Building upon David Parsons' work, this distribution has two goals:</p>

<ul class="num">
<li><p>Allow an &ldquo;out-of-the-box&rdquo; build on <em>Windows</em> using <em>Visual C++</em> (or
any <em>Standard C</em> compiler),</p></li>
<li><p>add some features that I deemed useful, mostly visible as new options
for <code>mkd2html</code>.</p></li>
</ul>


<p>To this end, this distribution differs from &ldquo;<em>discount/orc</em>&rdquo; in these
respects:</p>

<ol class="num">
<li><p>Project files for MS Visual C++ 2003 and 2008 (in <code>MSVC/</code>) are
provided, as well as</p></li>
<li><p>files (in <code>MSVC/posc/</code>) to allow building the rather &ldquo;<em>UNIX</em>ish&rdquo;
<code>discount</code> package on <em>Windows</em>&mdash;using (the <em>C</em> part of) any version
or edition of <em>Visual C++</em> without additional requirements.</p></li>
<li><p>New options for <code>mkd2html</code> (most just set a corresponding flag):
<code>-S</code> and <code>-I</code> to choose <em>HTML 4.01 Strict</em> or <em>ISO 15445:2000</em>
as the output <em>document type</em> instead of the default <em>HTML 4.01
Transitional</em>.</p></li>
<li><p>When the output is &ldquo;ISO HTML&rdquo; (<code>-I</code>):</p>

<ul class="num">
<li><p>don&rsquo;t write <code>width</code> and <code>height</code> attributes for images and objects;</p></li>
<li><p>don&rsquo;t write a <code>type="a"</code> attribute for &ldquo;alphabetic&rdquo; <code>&lt;OL&gt;</code> lists,
but emit a <code>class="alf"</code> attribute for &ldquo;alphabetic&rdquo; lists, and
<code>class="num"</code> else;</p></li>
<li><p>generate a <code>summary</code> attribute in each <code>&lt;table&gt;</code> (the attribute is
required in &ldquo;ISO HTML&rdquo;).</p></li>
</ul>
</li>
<li><p>Two new options <code>-l</code> and <code>-u</code> to choose the input encoding: <code>ISO-8859-1</code>
or <code>UTF-8</code>.</p></li>
<li><p>Three new options <code>-A</code>, <code>-L</code>, and <code>-U</code> to choose the output encoding:
<code>US-ASCII</code>, <code>ISO-8859-1</code>, or <code>UTF-8</code>.</p></li>
<li><p>An option <code>-T</code> to generate a Table of Contents, and place it at
the beginning of the document (<em>This &ldquo;feature&rdquo; is coarse and
preliminary!</em>).</p></li>
<li><p>A new syntax modeled after the Markdown notation &ldquo;<code>![text](uri
=WxH)</code>&rdquo; for images (<code>&lt;img&gt;</code>), which is very similar but generates
<code>&lt;object&gt;</code> elements (with a MIME type derived from the suffix of the
URI):</p>

<pre><code>?[text](uri =WxH)
</code></pre></li>
<li><p>The new flag value <code>wiki</code> to produce a variant of output that is
somewhat easier to post-process by Wiki software.</p></li>
</ol>


<h2>2  Changes to <code>discount</code> source files</h2>

<ul class="num">
<li><p><code>generate.c</code>: <strong>ADD:</strong> New code checks <code>MKD_WIKI</code> and <code>IS_WIKI</code>; new
function <code>wikiurl()</code>; new <em>linkytypes</em> <code>wikit</code> and <code>objt</code> and related
<code>IS_WIKI</code> and <code>IS_URL_MIME</code> values. Output <code>summary</code> attribute in
<code>&lt;table&gt;</code> when generating ISO HTML.</p></li>
<li><p><code>generate.c</code>: <strong>ADD:</strong> Check <code>MKD_ISO</code> and supress/emit some
attributes in &ldquo;ISO mode&rdquo;.</p></li>
<li><p><code>generate.c</code>: <strong>ADD:</strong> Process &ldquo;Object&rdquo; syntax into <code>&lt;object&gt;</code>
elements.</p></li>
<li><p><code>markdown.h</code>: <strong>ADD:</strong> Definition of new <code>MKD_</code>* bit mask values.
<strong>Important:</strong> must match definition in <code>mkdio.h.in</code>!</p></li>
<li><p><code>mkd2html.c</code>: <strong>ADD:</strong> Enable footnotes by default, and generate them.</p></li>
<li><p><code>mkd2hmtl.c</code>: <strong>ADD:</strong> Generate TOC if requested by <code>-T</code>.</p></li>
<li><p><code>pgm_options.c</code>: <strong>ADD:</strong> Detect flag <code>-f wiki</code>.</p></li>
</ul>


<h2>3  Changes to <code>discount</code> template files</h2>

<p>The configuration script <code>configure.sh</code> generates four files:</p>

<ol class="num">
<li><code>config.h</code> from user options and platform diagnostics.</li>
<li><code>Makefile</code> from the template <code>Makefile.in</code>.</li>
<li><code>version.c</code> from the template <code>version.c.in</code>.</li>
<li><code>mkdio.h</code> from the template <code>mkdio.h.in</code>></li>
</ol>


<p>Required changes to these generated files are effected by changing the
corresponding template file:</p>

<ul class="num">
<li><p><code>version.c.in</code>: <strong>ADD:</strong> A suffix added to the version identification
shown in the <code>markdown -V</code> output: <code>"-wiki"</code>. This differentiates it
from the version information shown by an <em>original</em> <code>markdown</code> built
from <code>discount/orc</code>.</p></li>
<li><p><code>mkdio.h.in</code>: <strong>ADD:</strong> Define new flag bit-values <code>MKD_</code>*.
<strong>Important:</strong> They must match the definition in <code>markdown.h</code>!</p></li>
</ul>


<h2>4  Files of <code>discount</code> intentionally <em>not</em> changed</h2>

<ul class="num">
<li><code>VERSION</code>: This should only contain a numeric version identification.
The version information output by <code>markdown -V</code> is modified in
<code>version.c.in</code>.</li>
</ul>


<h2>5  Added files and directories</h2>

<ul class="num">
<li><p><code>MSVC/</code>: All files in this directory are new, written by Martin
Hofmann (<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#x74;&#x69;&#x6e;&#x2d;&#112;&#111;&#x74;&#64;&#103;&#109;&#x78;&#46;&#110;&#101;&#116;">&#x74;&#x69;&#x6e;&#45;&#x70;&#x6f;&#x74;&#x40;&#x67;&#109;&#120;&#x2e;&#110;&#101;&#x74;</a>), except for these files:</p>

<ul class="num">
<li> <code>ansidecl.h</code>, <code>ansidecl_1996.h</code>, and <code>ansidecl_2001.h</code> are
 <em>Copyright &copy; 1991&ndash;2001 Free Software Foundation</em>.</li>
<li> <code>getopt.c</code> and <code>getopt.h</code> are <em>Copyright &copy; 2000&ndash;2003 Mark K.
 Kim</em>.</li>
<li> <code>inttypes.h</code>, <code>stdint.h</code> are <em>Copyright &copy; 2006 Alexander
 Chemeris</em>.</li>
</ul>


<p>   These files contain their own license conditions, see the contents
   of <code>MSVC/posc/</code>.</p></li>
</ul>

</body>
</html>

% CHANGES file of tin-pot/discount   
% Martin Hofmann <tin-pot@gmx.net>  
% 2014-02-12  


Changes in this distribution of `discount`
==========================================

1  Overview
-----------

For the most part, the `discount` sources are identical to these in
David Parsons' `discount-2.1.6.tar.bz2` source archive downloadable from
his [project site][dp].

Building upon this, this distribution adds the following features:

1. Project files for MS Visual C++ 2003 and 2008 (in `MSVC/`, as well as

2. files to allow building the Unixish `discount` package on Windows (in
   `MSVC/posc/` without additional requirements.

3. The new options `-S` and `-I` to `mkd2html.c`, to choose *HTML 4.01
   Strict* and *ISO 15445:2000* doctypes,

4. and a fix to a [bug][co] in `mkd2html.c`.

5. The new flag value `wiki` (with the value `0x00800000`) to produce a
   somewhat Wiki-friendly variant of output HTML.


2  Changes to `discount` source files
-------------------------------------

`generate.c`

:   **ADD:** Added code tests `MKD_WIKI` and `IS_WIKI`; new function
    `wikiurl()`; new *linkytype* `wikit` and related `IS_WIKI` macro.

`markdown.h`

:   **ADD:** Add definition of `MKD_WIKI` (**Important:** must match
    definition in `mkdio.h.in`!)

`mkd2html.c`

:   **FIX:** `while ( argc > 2 )` (see [*github* commit][co].)

`pgm_options.c`

:   **ADD:** Detect flag `-f wiki`.


3  Changes to `discount` template files
---------------------------------------

The configuration script `configure.sh` generates three files:

1. `config.h` from user options and platform diagnostics.
2. `Makefile` from the template `Makefile.in`.
3. `version.c` from the template `version.c.in`.
4. `mkdio.h` from the template `mkdio.h.in`>

Required changes to these generated files are effected by changing the
corresponding template file:

`version.c.in`

:    **ADD:** A suffix added to the version identification shown in the
     `markdown -V` output: `"-wiki"`. This differentiates it from the
     version information shown by an *original* `markdown` built from
     `discount-2.1.6.tar.bz2`.

`mkdio.h.in`

:    **ADD:** Define the flag bit-value `MKD_WIKI`.


4  Files of `discount` explicitly *not* changed
-----------------------------------------------

`VERSION`

:    This should only contain a numeric version identification.
     The `markdown -V` version information output is modified in
     `version.c.in`.


5  Added files and directories
------------------------------

`MSVC/`

:    All files in this directory are new, written by Martin Hofmann
     (<tin-pot@gmx.net>), except these files in `MSVC/posc/`:

     - `ansidecl.h`, `ansidecl_1996.h`, and `ansidecl_2001.h` are
       *Copyright (c) 1991--2001 Free Software Foundation*.
     - `getopt.c` and `getopt.h` are *Copyright (c) 2000--2003 Mark K.
       Kim*.
     - `inttypes.h`, `stdint.h` are *Copyright (c) 2006 Alexander
       Chemeris*.

     These files contain their own license conditions, see the contents
     of `MSVC/posc/`.


[dp]:http://www.pell.portland.or.us/~orc/Code/discount/
[co]:https://github.com/Orc/discount/commit/c1904052041dafc085791e6f06340dbd1472536b

----

<p>
  <a href="http://validator.w3.org/check?uri=referer">
    <img src="http://validator.w3.org/images/v15445"
         alt="Valid ISO/IEC 15445:2000">
  </a>
</p>

